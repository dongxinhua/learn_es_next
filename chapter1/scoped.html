<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>块级作用域绑定 | Learn-ES-Next</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="shortcut icon" type="image/x-icon" href="/learn_es_next/favicon.ico">
    <meta name="description" content="学习ES6笔记  ---  coderdxh">
    
    <link rel="preload" href="/learn_es_next/assets/css/0.styles.c4659089.css" as="style"><link rel="preload" href="/learn_es_next/assets/js/app.10615e40.js" as="script"><link rel="preload" href="/learn_es_next/assets/js/2.7e0aeeb4.js" as="script"><link rel="preload" href="/learn_es_next/assets/js/10.6d2e863e.js" as="script"><link rel="prefetch" href="/learn_es_next/assets/js/11.76ab182b.js"><link rel="prefetch" href="/learn_es_next/assets/js/12.9b235848.js"><link rel="prefetch" href="/learn_es_next/assets/js/3.d6c372fe.js"><link rel="prefetch" href="/learn_es_next/assets/js/4.10021e72.js"><link rel="prefetch" href="/learn_es_next/assets/js/5.90a2f73f.js"><link rel="prefetch" href="/learn_es_next/assets/js/6.2b2da37a.js"><link rel="prefetch" href="/learn_es_next/assets/js/7.44c2a116.js"><link rel="prefetch" href="/learn_es_next/assets/js/8.1b3d34d5.js"><link rel="prefetch" href="/learn_es_next/assets/js/9.f4527029.js">
    <link rel="stylesheet" href="/learn_es_next/assets/css/0.styles.c4659089.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/learn_es_next/" class="home-link router-link-active"><!----> <span class="site-name">Learn-ES-Next</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基本</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/learn_es_next/chapter1/scoped.html" aria-current="page" class="active sidebar-link">块级作用域绑定</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn_es_next/chapter1/scoped.html#_1-变量提升-hoisting" class="sidebar-link">1. 变量提升(Hoisting)</a></li><li class="sidebar-sub-header"><a href="/learn_es_next/chapter1/scoped.html#_2-块级声明" class="sidebar-link">2. 块级声明</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/learn_es_next/chapter1/scoped.html#_2-1-let-声明" class="sidebar-link">2.1 let 声明</a></li><li class="sidebar-sub-header"><a href="/learn_es_next/chapter1/scoped.html#_2-2-const-声明" class="sidebar-link">2.2 const 声明</a></li><li class="sidebar-sub-header"><a href="/learn_es_next/chapter1/scoped.html#_2-3-临时死区-temporal-dead-zone" class="sidebar-link">2.3 临时死区(Temporal Dead Zone)</a></li><li class="sidebar-sub-header"><a href="/learn_es_next/chapter1/scoped.html#_2-4-全局块作用域绑定" class="sidebar-link">2.4 全局块作用域绑定</a></li></ul></li></ul></li><li><a href="/learn_es_next/chapter1/string.html" class="sidebar-link">字符串</a></li><li><a href="/learn_es_next/chapter1/function.html" class="sidebar-link">函数</a></li><li><a href="/learn_es_next/chapter1/object.html" class="sidebar-link">对象</a></li><li><a href="/learn_es_next/chapter1/symbol.html" class="sidebar-link">Symbol 和 Symbol 属性</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="块级作用域绑定"><a href="#块级作用域绑定" class="header-anchor">#</a> 块级作用域绑定</h1> <h2 id="_1-变量提升-hoisting"><a href="#_1-变量提升-hoisting" class="header-anchor">#</a> 1. 变量提升(Hoisting)</h2> <p>​		在函数作用域或全局作用域中通过关键字 var 声明的变量，无论实际上是在哪里声明的，都会被当成在当前作用域顶部声明的变量，这就是提升(Hoisting)机制。在预编译阶段，变量的声明会被提升至顶部，而初始化的操作依旧留在原处执行。</p> <p>​		ECMAScript 6 引入块级作用域来强化对变量生命周期的控制。</p> <h2 id="_2-块级声明"><a href="#_2-块级声明" class="header-anchor">#</a> 2. 块级声明</h2> <p>​		块级声明用于声明在指定块的作用域之外无法访问的变量。块级作用域存在于：函数内部、块中({ ... })。</p> <h3 id="_2-1-let-声明"><a href="#_2-1-let-声明" class="header-anchor">#</a> 2.1 let 声明</h3> <p>​		用 let 声明变量，可以把变量的作用域限制在当前代码块中。</p> <p>​		用 let 声明变量，不会进行变量提升，禁止重声明。</p> <h3 id="_2-2-const-声明"><a href="#_2-2-const-声明" class="header-anchor">#</a> 2.2 const 声明</h3> <p>​		用 const 声明的是常量，其值一旦被设定后不可更改，因此每个通过 const 声明的常量都必须进行初始化。</p> <p>​		const声明不允许修改绑定，但允许修改值。const 声明对象时，意味着可以修改对象的属性值：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'coderdxh'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">18</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">22</span><span class="token punctuation">;</span>  <span class="token comment">// 22</span>

person <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token string">'Xhua'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">22</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token comment">// 报错</span>
</code></pre></div><h3 id="_2-3-临时死区-temporal-dead-zone"><a href="#_2-3-临时死区-temporal-dead-zone" class="header-anchor">#</a> 2.3 临时死区(Temporal Dead Zone)</h3> <p>​		对于我来说，这个概念属于新的，之前没接触到的，通过例子来解释一下：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// foo 没有定义</span>
<span class="token keyword">typeof</span> foo<span class="token punctuation">;</span>  <span class="token comment">// 'undefined'</span>
</code></pre></div><p>​		可见，正常情况下当变量没有定义时，使用 typeof 操作时，会返回 undefined，但是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 引用错误</span>
  	<span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>​		可见，当处于由 let (const) 所在的块中，在声明变量之前进行 typeof 操作会抛出错误，因此 let foo = 'blue'; 并不会执行。</p> <p>​		其实，当处于由 let (const) 所在的块中时，foo未声明，就会放在&quot;临时死区&quot;(TDZ)中，而访问 TDZ 中的变量就会触发运行时的错误。</p> <div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> foo<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'undefined'</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token string">'blue'</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>​		JavaScript 引擎在扫描代码发现变量声明时，要么将它们提升至作用域顶部(遇到 var 声明)，要么将声明放到 TDZ 中(遇到 let 和 const 声明)。访问 TDZ 中的变量会触发运行时错误。只有执行过变量声明语句后，变量才会从 TDZ 中移出，然后方可正常运行。</p> <h3 id="_2-4-全局块作用域绑定"><a href="#_2-4-全局块作用域绑定" class="header-anchor">#</a> 2.4 全局块作用域绑定</h3> <p>​		当 var 被用于全局作用域时，它会创建一个新的全局变量作为全局对象(浏览器环境中的 window 对象) 的属性。这意味着用 var 可能会无意的覆盖一个已经存在的全局属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'coderdxh'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 'coderdxh'</span>
</code></pre></div><p>​		当在全局作用域中使用 let 或 const，会在全局作用域下创建一个新的绑定，但该绑定不会添加为全局对象的属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'coderdxh'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ''</span></code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/learn_es_next/chapter1/string.html">
        字符串
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/learn_es_next/assets/js/app.10615e40.js" defer></script><script src="/learn_es_next/assets/js/2.7e0aeeb4.js" defer></script><script src="/learn_es_next/assets/js/10.6d2e863e.js" defer></script>
  </body>
</html>
